import{c as s,j as e}from"./vendor-CIDEvgjn.js";import{r as a}from"./react-YvAU7kAw.js";import{a as l}from"./adminApiService-BA07r5pn.js";import{d as t,e as r,h as i,R as o}from"./index-DEkLrubD.js";import{e as n,w as d,B as c,O as u,h,i as j,C as x,p as m}from"./antd-Ca0_LWAN.js";import{R as v,A as y,b as p,X as f,Y as g,T as w,f as b}from"./recharts-OKR9gfyr.js";import"./socket-CUkmNz_4.js";function C(){const[C,A]=a.useState("daily"),[k,U]=a.useState(30),S=s({queryKey:["user-total-stats"],queryFn:()=>l.getUserStats()}),T=s({queryKey:["user-growth",C,k],queryFn:()=>l.getUsersOverTime(C,k)}),N=S.data||{},E=N.data??N,O=T.data||[],q=O.data??O??[],K=Array.isArray(q)?q.map(s=>({date:s.period||s.date,count:s.count??s.value??0})):[],B=(null==E?void 0:E.admin)??(null==E?void 0:E.admins)??(null==E?void 0:E.adminCount)??(null==E?void 0:E.adminsCount)??(null==E?void 0:E.totalAdmin)??(null==E?void 0:E.totalAdmins)??(null==E?void 0:E.adminUsers)??0,F=(null==E?void 0:E.total)??(null==E?void 0:E.totalUsers)??(null==E?void 0:E.users)??0,z=(null==E?void 0:E.verified)??(null==E?void 0:E.verifiedUsers)??(null==E?void 0:E.verifiedCount)??0,D=(null==E?void 0:E.user)??(null==E?void 0:E.users)??(null==E?void 0:E.userCount)??(null==E?void 0:E.normalUsers)??0;return e.jsxs("div",{style:{padding:24},children:[e.jsxs(n,{style:{width:"100%",justifyContent:"space-between",marginBottom:16},children:[e.jsx("h2",{style:{margin:0},children:"Thống kê người dùng"}),e.jsxs(n,{children:[e.jsx(d,{value:C,onChange:s=>A(s),options:[{label:"Theo ngày",value:"daily"},{label:"Theo tuần",value:"weekly"},{label:"Theo tháng",value:"monthly"}]}),e.jsx(d,{value:k,onChange:s=>U(s),options:[{label:"7 ngày",value:7},{label:"30 ngày",value:30},{label:"90 ngày",value:90},{label:"1 năm",value:365}]}),e.jsx(c,{icon:e.jsx(u,{}),onClick:()=>{S.refetch(),T.refetch()},children:"Làm mới"})]})]}),e.jsxs(h,{gutter:16,style:{marginBottom:16},children:[e.jsx(j,{span:6,children:e.jsx(x,{className:"shadow-card",children:e.jsx(m,{title:"Tổng người dùng",value:F,prefix:e.jsx(t,{style:{color:"var(--primary)"}})})})}),e.jsx(j,{span:6,children:e.jsx(x,{className:"shadow-card",children:e.jsx(m,{title:"Đã xác thực",value:z,prefix:e.jsx(r,{style:{color:"var(--success)"}}),valueStyle:{color:"var(--success)"}})})}),e.jsx(j,{span:6,children:e.jsx(x,{className:"shadow-card",children:e.jsx(m,{title:"Admins",value:B,prefix:e.jsx(i,{style:{color:"var(--info)"}}),valueStyle:{color:"var(--info)"}})})}),e.jsx(j,{span:6,children:e.jsx(x,{className:"shadow-card",children:e.jsx(m,{title:"Users",value:D,prefix:e.jsx(o,{})})})})]}),e.jsx(x,{className:"shadow-card",title:"Tăng trưởng người dùng",children:e.jsx("div",{style:{height:360},children:e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(y,{data:K,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0EA5E9",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#0EA5E9",stopOpacity:0})]})}),e.jsx(p,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"date",tick:{fontSize:12}}),e.jsx(g,{allowDecimals:!1,tick:{fontSize:12}}),e.jsx(w,{formatter:s=>[s,"Người dùng"],labelFormatter:s=>`Ngày ${s}`}),e.jsx(b,{type:"monotone",dataKey:"count",stroke:"#0EA5E9",strokeWidth:2,fillOpacity:1,fill:"url(#colorUsers)"})]})})})})]})}export{C as default};
