class e extends Error{}function t(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}(t)}catch(r){return atob(t)}}function r(r,n){if("string"!=typeof r)throw new e("Invalid token specified: must be a string");n||(n={});const a=!0===n.header?0:1,o=r.split(".")[a];if("string"!=typeof o)throw new e(`Invalid token specified: missing part #${a+1}`);let i;try{i=t(o)}catch(s){throw new e(`Invalid token specified: invalid base64 for part #${a+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new e(`Invalid token specified: invalid json for part #${a+1} (${s.message})`)}}e.prototype.name="InvalidTokenError";export{r as j};
