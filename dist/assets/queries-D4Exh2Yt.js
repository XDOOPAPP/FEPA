import{c as s,u as a,b as e}from"./vendor-CIDEvgjn.js";import{s as t}from"./subscriptionAPI-B0zzECmy.js";import{g as r}from"./index-C6bCr4XE.js";import{o as n}from"./ocrAPI-tqSRKtv3.js";import{a as i}from"./aiAPI-Dv-e1IUL.js";import{s as u}from"./antd-Bnai4W4o.js";const o=async()=>{const s=await r.get("/expenses/admin/stats"),a=s.data||s;return(null==a?void 0:a.data)??a},c=async()=>{const s=await r.get("/budgets/admin/stats"),a=s.data||s;return(null==a?void 0:a.data)??a},y=()=>s({queryKey:["subscriptions","plans"],queryFn:async()=>{const s=await t.getPlans();return s.data||s},staleTime:3e5,retry:3}),d=()=>{const s=a();return e({mutationFn:async s=>await t.createPlan(s),onSuccess:()=>{s.invalidateQueries({queryKey:["subscriptions","plans"]}),u.success("Thêm gói subscription thành công")},onError:s=>{var a,e;u.error((null==(e=null==(a=s.response)?void 0:a.data)?void 0:e.message)||"Lỗi khi thêm gói")}})},l=()=>{const s=a();return e({mutationFn:async({planId:s,data:a})=>await t.updatePlan(s,a),onSuccess:(a,e)=>{s.setQueryData(["subscriptions","plans"],s=>(Array.isArray(s)?s:(null==s?void 0:s.data)||[]).map(s=>s._id===e.planId||s.id===e.planId?{...s,...e.data,...a}:s)),s.setQueryData(["subscriptions","plan",e.planId],a),u.success("Cập nhật gói subscription thành công")},onError:a=>{var e,t;s.invalidateQueries({queryKey:["subscriptions","plans"]}),u.error((null==(t=null==(e=a.response)?void 0:e.data)?void 0:t.message)||"Lỗi khi cập nhật gói")}})},p=()=>{const s=a();return e({mutationFn:async s=>await t.disablePlan(s),onSuccess:()=>{s.invalidateQueries({queryKey:["subscriptions","plans"]}),u.success("Đã vô hiệu hóa gói subscription")},onError:s=>{var a,e;u.error((null==(e=null==(a=s.response)?void 0:a.data)?void 0:e.message)||"Lỗi khi xóa gói")}})},m=()=>s({queryKey:["subscriptions","stats"],queryFn:async()=>await t.getStats(),staleTime:6e4,retry:3}),g=()=>s({queryKey:["subscriptions","health"],queryFn:async()=>await t.checkHealth(),staleTime:3e4,retry:2}),h=()=>s({queryKey:["expenses","admin","stats"],queryFn:async()=>await o(),staleTime:12e4,retry:3}),b=()=>s({queryKey:["budgets","admin","stats"],queryFn:async()=>await c(),staleTime:12e4,retry:3}),q=()=>s({queryKey:["ocr","admin","stats"],queryFn:async()=>await n.getAdminStats(),staleTime:12e4,retry:3}),v=()=>s({queryKey:["ai","admin","stats"],queryFn:async()=>await i.getAdminStats(),staleTime:12e4,retry:3});export{b as a,q as b,v as c,m as d,y as e,g as f,d as g,l as h,p as i,h as u};
