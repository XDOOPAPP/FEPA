import{c as a,u as s,b as e}from"./vendor-CIDEvgjn.js";import{s as t}from"./subscriptionAPI-D834kGML.js";import{g as n}from"./index-CWIbmrm_.js";import{o as r}from"./ocrAPI-ivp9zvPg.js";import{a as i}from"./aiAPI-g6JlSqtA.js";import{s as u}from"./antd-B4HmBe3_.js";const o=async()=>{const a=await n.get("/expenses/admin/stats"),s=a.data||a;return(null==s?void 0:s.data)??s},c=async()=>{const a=await n.get("/budgets/admin/stats"),s=a.data||a;return(null==s?void 0:s.data)??s},y=()=>a({queryKey:["subscriptions","plans"],queryFn:async()=>{const a=await t.getPlans();return a.data||a},staleTime:3e5,retry:3}),d=()=>{const a=s();return e({mutationFn:async a=>await t.createPlan(a),onSuccess:()=>{a.invalidateQueries({queryKey:["subscriptions","plans"]}),u.success("Thêm gói subscription thành công")},onError:a=>{var s,e;u.error((null==(e=null==(s=a.response)?void 0:s.data)?void 0:e.message)||"Lỗi khi thêm gói")}})},l=()=>{const a=s();return e({mutationFn:async({planId:a,data:s})=>await t.updatePlan(a,s),onSuccess:(s,e)=>{a.setQueryData(["subscriptions","plans"],a=>(Array.isArray(a)?a:(null==a?void 0:a.data)||[]).map(a=>a._id===e.planId||a.id===e.planId?{...a,...e.data,...s}:a)),a.setQueryData(["subscriptions","plan",e.planId],s),u.success("Cập nhật gói subscription thành công")},onError:s=>{var e,t;a.invalidateQueries({queryKey:["subscriptions","plans"]}),u.error((null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||"Lỗi khi cập nhật gói")}})},p=()=>{const a=s();return e({mutationFn:async a=>await t.disablePlan(a),onSuccess:()=>{a.invalidateQueries({queryKey:["subscriptions","plans"]}),u.success("Đã vô hiệu hóa gói subscription")},onError:a=>{var s,e;u.error((null==(e=null==(s=a.response)?void 0:s.data)?void 0:e.message)||"Lỗi khi xóa gói")}})},m=()=>a({queryKey:["subscriptions","stats"],queryFn:async()=>await t.getStats(),staleTime:6e4,retry:3}),g=()=>a({queryKey:["subscriptions","health"],queryFn:async()=>await t.checkHealth(),staleTime:3e4,retry:2}),h=()=>a({queryKey:["expenses","admin","stats"],queryFn:async()=>await o(),staleTime:12e4,retry:3}),v=()=>a({queryKey:["budgets","admin","stats"],queryFn:async()=>await c(),staleTime:12e4,retry:3}),b=()=>a({queryKey:["ocr","admin","stats"],queryFn:async()=>await r.getAdminStats(),staleTime:12e4,retry:3}),q=()=>a({queryKey:["ai","admin","stats"],queryFn:async()=>await i.getAdminStats(),staleTime:12e4,retry:3});export{v as a,b,q as c,m as d,y as e,g as f,d as g,l as h,p as i,h as u};
