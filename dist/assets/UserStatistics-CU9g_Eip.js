import{c as s,j as e}from"./vendor-CIDEvgjn.js";import{r as a}from"./react-YvAU7kAw.js";import{a as l}from"./adminApiService-B11Tsdp0.js";import{a as t}from"./adminAPI-osqYiyjh.js";import{c as r,e as i,h as n,R as o}from"./index-CWIbmrm_.js";import{e as d,j as c,B as u,m as h,h as m,i as j,C as v,t as x}from"./antd-B4HmBe3_.js";import{R as y,A as p,C as g,X as f,Y as A,T as C,d as w}from"./recharts-CeeJsarb.js";import"./socket-CUkmNz_4.js";function b(){var b,k;const[U,S]=a.useState("daily"),[T,q]=a.useState(30),N=s({queryKey:["user-total-stats"],queryFn:()=>l.getUserStats()}),E=s({queryKey:["user-growth",U,T],queryFn:()=>l.getUsersOverTime(U,T)}),K=s({queryKey:["admins"],queryFn:t.getAllAdmins}),F=N.data||{},O=F.data??F,B=E.data||[],z=B.data??B??[],D=Array.isArray(z)?z.map(s=>({date:s.period||s.date,count:s.count??s.value??0})):[],R=(null==O?void 0:O.admin)??(null==O?void 0:O.admins)??(null==O?void 0:O.adminCount)??(null==O?void 0:O.adminsCount)??(null==O?void 0:O.totalAdmin)??(null==O?void 0:O.totalAdmins)??(null==O?void 0:O.adminUsers)??(Array.isArray(null==(b=K.data)?void 0:b.data)?null==(k=K.data)?void 0:k.data.length:Array.isArray(K.data)?K.data.length:0)??0,G=(null==O?void 0:O.total)??(null==O?void 0:O.totalUsers)??(null==O?void 0:O.users)??0,I=(null==O?void 0:O.verified)??(null==O?void 0:O.verifiedUsers)??(null==O?void 0:O.verifiedCount)??0,L=(null==O?void 0:O.user)??(null==O?void 0:O.users)??(null==O?void 0:O.userCount)??(null==O?void 0:O.normalUsers)??0;return e.jsxs("div",{style:{padding:24},children:[e.jsxs(d,{style:{width:"100%",justifyContent:"space-between",marginBottom:16},children:[e.jsx("h2",{style:{margin:0},children:"Thống kê người dùng"}),e.jsxs(d,{children:[e.jsx(c,{value:U,onChange:s=>S(s),options:[{label:"Theo ngày",value:"daily"},{label:"Theo tuần",value:"weekly"},{label:"Theo tháng",value:"monthly"}]}),e.jsx(c,{value:T,onChange:s=>q(s),options:[{label:"7 ngày",value:7},{label:"30 ngày",value:30},{label:"90 ngày",value:90},{label:"1 năm",value:365}]}),e.jsx(u,{icon:e.jsx(h,{}),onClick:()=>{N.refetch(),E.refetch()},children:"Làm mới"})]})]}),e.jsxs(m,{gutter:16,style:{marginBottom:16},children:[e.jsx(j,{span:6,children:e.jsx(v,{className:"shadow-card",children:e.jsx(x,{title:"Tổng người dùng",value:G,prefix:e.jsx(r,{style:{color:"var(--primary)"}})})})}),e.jsx(j,{span:6,children:e.jsx(v,{className:"shadow-card",children:e.jsx(x,{title:"Đã xác thực",value:I,prefix:e.jsx(i,{style:{color:"var(--success)"}}),valueStyle:{color:"var(--success)"}})})}),e.jsx(j,{span:6,children:e.jsx(v,{className:"shadow-card",children:e.jsx(x,{title:"Admins",value:R,prefix:e.jsx(n,{style:{color:"var(--info)"}}),valueStyle:{color:"var(--info)"}})})}),e.jsx(j,{span:6,children:e.jsx(v,{className:"shadow-card",children:e.jsx(x,{title:"Users",value:L,prefix:e.jsx(o,{})})})})]}),e.jsx(v,{className:"shadow-card",title:"Tăng trưởng người dùng",children:e.jsx("div",{style:{height:360},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(p,{data:D,margin:{top:10,right:20,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0EA5E9",stopOpacity:.4}),e.jsx("stop",{offset:"95%",stopColor:"#0EA5E9",stopOpacity:0})]})}),e.jsx(g,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"date",tick:{fontSize:12}}),e.jsx(A,{allowDecimals:!1,tick:{fontSize:12}}),e.jsx(C,{formatter:s=>[s,"Người dùng"],labelFormatter:s=>`Ngày ${s}`}),e.jsx(w,{type:"monotone",dataKey:"count",stroke:"#0EA5E9",strokeWidth:2,fillOpacity:1,fill:"url(#colorUsers)"})]})})})})]})}export{b as default};
