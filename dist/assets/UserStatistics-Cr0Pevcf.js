import{c as s,j as e}from"./vendor-CIDEvgjn.js";import{r as a}from"./react-YvAU7kAw.js";import{g as t,c as l,e as r,h as n,R as i}from"./index-eiZvAwCW.js";import{e as o,j as d,B as c,m as h,h as j,i as x,C as u,t as m}from"./antd-BDFa4u8q.js";import{R as y,L as g,C as v,X as p,Y as f,T as w,b as T}from"./recharts-Bl_pMUXE.js";import"./socket-CUkmNz_4.js";const b={getTotalStats:async()=>await t.get("/auth/stats/total"),getUsersOverTime:async(s,e)=>await t.get("/auth/stats/users-over-time",{params:{period:s,days:e}})};function k(){const[t,k]=a.useState("daily"),[C,S]=a.useState(30),N=s({queryKey:["user-total-stats"],queryFn:b.getTotalStats}),q=s({queryKey:["user-growth",t,C],queryFn:()=>b.getUsersOverTime(t,C)}),K=N.data||{},B=K.data??K,U=q.data||[],A=U.data??U??[];return e.jsxs("div",{style:{padding:24},children:[e.jsxs(o,{style:{width:"100%",justifyContent:"space-between",marginBottom:16},children:[e.jsx("h2",{style:{margin:0},children:"Thống kê người dùng"}),e.jsxs(o,{children:[e.jsx(d,{value:t,onChange:s=>k(s),options:[{label:"Theo ngày",value:"daily"},{label:"Theo tuần",value:"weekly"},{label:"Theo tháng",value:"monthly"}]}),e.jsx(d,{value:C,onChange:s=>S(s),options:[{label:"7 ngày",value:7},{label:"30 ngày",value:30},{label:"90 ngày",value:90},{label:"1 năm",value:365}]}),e.jsx(c,{icon:e.jsx(h,{}),onClick:()=>{N.refetch(),q.refetch()},children:"Làm mới"})]})]}),e.jsxs(j,{gutter:16,style:{marginBottom:16},children:[e.jsx(x,{span:6,children:e.jsx(u,{className:"shadow-card",children:e.jsx(m,{title:"Tổng người dùng",value:(null==B?void 0:B.total)||0,prefix:e.jsx(l,{style:{color:"var(--primary)"}})})})}),e.jsx(x,{span:6,children:e.jsx(u,{className:"shadow-card",children:e.jsx(m,{title:"Đã xác thực",value:(null==B?void 0:B.verified)||0,prefix:e.jsx(r,{style:{color:"var(--success)"}}),valueStyle:{color:"var(--success)"}})})}),e.jsx(x,{span:6,children:e.jsx(u,{className:"shadow-card",children:e.jsx(m,{title:"Admins",value:(null==B?void 0:B.admin)||0,prefix:e.jsx(n,{style:{color:"var(--info)"}}),valueStyle:{color:"var(--info)"}})})}),e.jsx(x,{span:6,children:e.jsx(u,{className:"shadow-card",children:e.jsx(m,{title:"Users",value:(null==B?void 0:B.user)||0,prefix:e.jsx(i,{})})})})]}),e.jsx(u,{className:"shadow-card",title:"Tăng trưởng người dùng",children:e.jsx("div",{style:{height:360},children:e.jsx(y,{width:"100%",height:"100%",children:e.jsxs(g,{data:A,children:[e.jsx(v,{strokeDasharray:"3 3"}),e.jsx(p,{dataKey:"date"}),e.jsx(f,{}),e.jsx(w,{}),e.jsx(T,{type:"monotone",dataKey:"count",stroke:"#0EA5E9",strokeWidth:2})]})})})})]})}export{k as default};
