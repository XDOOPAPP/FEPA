import{c as s,j as e}from"./vendor-CIDEvgjn.js";import{r as l}from"./react-YvAU7kAw.js";import{o as a}from"./ocrAPI-tqSRKtv3.js";import{L as t,o as i,e as r,c as n}from"./index-C6bCr4XE.js";import{e as d,T as c,j as o,h,i as x,C as j,u as m,Y as u}from"./antd-Bnai4W4o.js";import{R as g}from"./CloseCircleOutlined-BYmjHuxT.js";import{R as y}from"./FieldTimeOutlined-DZpXUa-T.js";import{R as v,P as p,a as f,C as T,T as w,L as B,B as E,b as F,X as C,Y as b,c as N}from"./recharts-B4hB0_p6.js";import"./socket-CUkmNz_4.js";const R=["#0EA5E9","#10B981","#F59E0B","#F43F5E"];function k(){const{data:k,isLoading:A}=s({queryKey:["ocr-admin-stats"],queryFn:a.getAdminStats,staleTime:12e4}),K=k,M=l.useMemo(()=>{const s=(null==K?void 0:K.typeBreakdown)||{};return Object.entries(s).map(([s,e])=>({name:s,value:e}))},[K]),O=(null==K?void 0:K.successRate)??0,S=Math.max(0,100-O),P=(null==K?void 0:K.averageProcessingTime)??0;return A?e.jsx(t,{fullscreen:!0,loading:!0,tip:"Đang tải thống kê OCR..."}):e.jsxs("div",{style:{padding:24},children:[e.jsxs(d,{style:{width:"100%",justifyContent:"space-between",marginBottom:16},children:[e.jsx(c.Title,{level:3,style:{margin:0},children:"Thống kê OCR / AI"}),e.jsx(o,{color:"blue",children:"Realtime cập nhật"})]}),e.jsxs(h,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Tổng yêu cầu",value:(null==K?void 0:K.totalJobs)||0,prefix:e.jsx(i,{style:{color:"#0EA5E9"}})})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Thành công",value:(null==K?void 0:K.successfulScans)||0,prefix:e.jsx(r,{style:{color:"#10B981"}}),valueStyle:{color:"#10B981"}})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Thất bại",value:(null==K?void 0:K.failedScans)||0,prefix:e.jsx(g,{style:{color:"#F43F5E"}}),valueStyle:{color:"#F43F5E"}})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Người dùng",value:(null==K?void 0:K.totalUsers)||0,prefix:e.jsx(n,{style:{color:"#F59E0B"}})})})})]}),e.jsxs(h,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(x,{xs:24,md:12,children:e.jsx(j,{className:"shadow-card",title:"Tỉ lệ thành công",children:e.jsxs(d,{direction:"vertical",style:{width:"100%"},children:[e.jsx(u,{percent:Math.round(O),status:"active",strokeColor:"#10B981"}),e.jsxs(d,{children:[e.jsxs(o,{color:"green",children:["Thành công: ",Math.round(O),"%"]}),e.jsxs(o,{color:"red",children:["Thất bại: ",Math.round(S),"%"]})]}),e.jsxs(d,{align:"center",children:[e.jsx(y,{}),e.jsxs(c.Text,{children:["Thời gian xử lý trung bình: ",P?`${P.toFixed(2)}s`:"N/A"]})]})]})})}),e.jsx(x,{xs:24,md:12,children:e.jsx(j,{className:"shadow-card",title:"Phân loại yêu cầu",children:e.jsx("div",{style:{height:280},children:M.length>0?e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(p,{children:[e.jsx(f,{data:M,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:M.map((s,l)=>e.jsx(T,{fill:R[l%R.length]},`cell-${s.name}`))}),e.jsx(w,{}),e.jsx(B,{})]})}):e.jsx(c.Text,{children:"Chưa có dữ liệu phân loại."})})})})]}),e.jsx(j,{className:"shadow-card",title:"Khối lượng xử lý theo loại",children:e.jsx("div",{style:{height:320},children:M.length>0?e.jsx(v,{width:"100%",height:"100%",children:e.jsxs(E,{data:M,children:[e.jsx(F,{strokeDasharray:"3 3"}),e.jsx(C,{dataKey:"name"}),e.jsx(b,{allowDecimals:!1}),e.jsx(w,{}),e.jsx(N,{dataKey:"value",fill:"#0EA5E9",radius:[6,6,0,0]})]})}):e.jsx(c.Text,{children:"Chưa có dữ liệu khối lượng."})})})]})}export{k as default};
