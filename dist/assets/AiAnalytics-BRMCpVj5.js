import{c as s,j as e}from"./vendor-CIDEvgjn.js";import{r as l}from"./react-YvAU7kAw.js";import{a}from"./aiAPI-g6JlSqtA.js";import{L as t,b as i,e as r,c as n}from"./index-CWIbmrm_.js";import{e as d,T as c,u as o,h,i as x,C as j,t as m,a2 as u}from"./antd-B4HmBe3_.js";import{R as g}from"./CloseCircleOutlined-BTaVCU99.js";import{R as y}from"./FieldTimeOutlined-CbiiPV1h.js";import{R as p,P as v,e as f,f as T,T as w,a as B,B as F,C,X as N,Y as R,c as b}from"./recharts-CeeJsarb.js";import"./socket-CUkmNz_4.js";const A=["#0EA5E9","#10B981","#F59E0B","#F43F5E","#8B5CF6"];function E(){const{data:E,isLoading:k}=s({queryKey:["ai-admin-stats"],queryFn:a.getAdminStats,staleTime:12e4}),q=E,K=l.useMemo(()=>{const s=(null==q?void 0:q.requestsByType)||{};return Object.entries(s).map(([s,e])=>({name:s,value:e}))},[q]),M=(null==q?void 0:q.successRate)??0,P=Math.max(0,100-M),S=(null==q?void 0:q.averageProcessingTime)??0;return k?e.jsx(t,{fullscreen:!0,loading:!0,tip:"Đang tải thống kê AI..."}):e.jsxs("div",{style:{padding:24},children:[e.jsxs(d,{style:{width:"100%",justifyContent:"space-between",marginBottom:16},children:[e.jsx(c.Title,{level:3,style:{margin:0},children:"Thống kê AI Service"}),e.jsx(o,{color:"purple",children:"Realtime cập nhật"})]}),e.jsxs(h,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Tổng yêu cầu",value:(null==q?void 0:q.totalRequests)||0,prefix:e.jsx(i,{style:{color:"#8B5CF6"}})})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Thành công",value:(null==q?void 0:q.successfulRequests)||0,prefix:e.jsx(r,{style:{color:"#10B981"}}),valueStyle:{color:"#10B981"}})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Thất bại",value:(null==q?void 0:q.failedRequests)||0,prefix:e.jsx(g,{style:{color:"#F43F5E"}}),valueStyle:{color:"#F43F5E"}})})}),e.jsx(x,{xs:24,sm:12,md:6,children:e.jsx(j,{className:"shadow-card",children:e.jsx(m,{title:"Người dùng",value:(null==q?void 0:q.totalUsers)||0,prefix:e.jsx(n,{style:{color:"#F59E0B"}})})})})]}),e.jsxs(h,{gutter:[16,16],style:{marginBottom:16},children:[e.jsx(x,{xs:24,md:12,children:e.jsx(j,{className:"shadow-card",title:"Tỉ lệ thành công",children:e.jsxs(d,{direction:"vertical",style:{width:"100%"},children:[e.jsx(u,{percent:Math.round(M),status:"active",strokeColor:"#10B981"}),e.jsxs(d,{children:[e.jsxs(o,{color:"green",children:["Thành công: ",Math.round(M),"%"]}),e.jsxs(o,{color:"red",children:["Thất bại: ",Math.round(P),"%"]})]}),e.jsxs(d,{align:"center",children:[e.jsx(y,{}),e.jsxs(c.Text,{children:["Thời gian xử lý trung bình: ",S?`${S.toFixed(2)}s`:"N/A"]})]})]})})}),e.jsx(x,{xs:24,md:12,children:e.jsx(j,{className:"shadow-card",title:"Phân loại yêu cầu",children:e.jsx("div",{style:{height:280},children:K.length>0?e.jsx(p,{width:"100%",height:"100%",children:e.jsxs(v,{children:[e.jsx(f,{data:K,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:!0,children:K.map((s,l)=>e.jsx(T,{fill:A[l%A.length]},`cell-${s.name}`))}),e.jsx(w,{}),e.jsx(B,{})]})}):e.jsx(c.Text,{children:"Chưa có dữ liệu phân loại."})})})})]}),e.jsx(j,{className:"shadow-card",title:"Khối lượng xử lý theo loại",children:e.jsx("div",{style:{height:320},children:K.length>0?e.jsx(p,{width:"100%",height:"100%",children:e.jsxs(F,{data:K,children:[e.jsx(C,{strokeDasharray:"3 3"}),e.jsx(N,{dataKey:"name"}),e.jsx(R,{allowDecimals:!1}),e.jsx(w,{}),e.jsx(b,{dataKey:"value",fill:"#8B5CF6",radius:[6,6,0,0]})]})}):e.jsx(c.Text,{children:"Chưa có dữ liệu khối lượng."})})})]})}export{E as default};
